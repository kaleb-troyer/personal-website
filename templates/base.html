<!-- base.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}CV | Kaleb Troyer{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    {% block css %}{% endblock %}

    <!-- Loading icon kit for github and linkedin -->
    <script src="https://kit.fontawesome.com/eb8e385894.js" crossorigin="anonymous"></script>    
</head>

<!-- 
styling options: 
- body (effects all content)
- header (only has nav list)
- main
- footer (only has nav list)

other custom objects / flags: 
- collapsible

<main> content objects: 
- .primary
- .secondary
-->
<body> 
    <header>
        <nav>
            <ul>
                <li><a href="{{ url_for('home') }}">home</a></li>
                <li><a href="{{ url_for('design') }}">design</a></li>
                <li><a href="{{ url_for('about') }}">about</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main content of webpage loaded here, see corresponding html file -->
    <main>
        {% block content %}
        {% endblock %}
    </main>

    <footer>
        <nav>
            <ul>
                <li><a href="https://www.linkedin.com/in/kaleb-troyer-78a6a5106/">
                    <i class="fa-brands fa-linkedin"></i></a></li>
                <li><a href="https://github.com/kaleb-troyer">
                    <i class="fa-brands fa-square-github"></i></a></li>
                <li><a>kaleb troyer 2025</a></li>
            </ul>
        </nav>
    </footer>
</body>

<script>
    // for dynamically loading subpage html
    document.addEventListener("DOMContentLoaded", function () {
        const links = document.querySelectorAll(".navigator a");
        const content = document.getElementById("dynamic-content");

        links.forEach(link => {
            link.addEventListener("click", function (event) {
                event.preventDefault();

                let page = this.getAttribute("data-page");
                let root = window.location.pathname.startsWith("/about") ? "/about" : "/home";

                if (!page || page === "null") {
                    window.location.href = root;
                    return;
                }

                fetch(`${root}/${page}`, { headers: { "X-Requested-With": "XMLHttpRequest" } })
                    .then(response => response.text())
                    .then(html => {
                        content.innerHTML = html;
                        history.pushState({ page }, "", `${root}/${page}`);
                    })
                    .catch(error => console.error("Error loading page:", error));
            });
        });

        window.addEventListener("popstate", function (event) {
            if (event.state && event.state.page) {
                fetch(`/home/${event.state.page}`, { headers: { "X-Requested-With": "XMLHttpRequest" } })
                    .then(response => response.text())
                    .then(html => {
                        content.innerHTML = html;
                    });
            }
        });
    });
</script>

</html>

